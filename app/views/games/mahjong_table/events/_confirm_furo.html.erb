<div class="absolute bottom-1/8 right-1/10">
  <div class="flex flex-wrap gap-2" aria-label="副露の選択肢">
    <% @game.user_player.furo_candidates.each do |furo_name, furo_combinations| %>
      <% case furo_name.to_sym %>
      <% when :chi %>
        <% furo_combinations.each do |chi_combinations| %>
          <%= button_to game_play_command_path(@game),
                        params: {
                          event: "confirm_furo",
                          discarded_tile_id: @discarded_tile_id,
                          furo: true,
                          furo_type: furo_name,
                          furo_ids: chi_combinations.map(&:id)
                          },
                        form: {
                          id: "furo-#{furo_name}-#{chi_combinations.map(&:id).join('-')}",
                          data: {
                            testid: "furo_combinations",
                            furo_type: furo_name,
                            furo_ids: chi_combinations.map(&:id).join('-')
                          }
                        },
                        class: "inline-flex items-end gap-1 rounded border px-2 py-1 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cyan-300" do %>
            <% chi_combinations.each do |hand| %>
              <%= render partial: "games/mahjong_table/tile", locals: { tile: hand, red: hand.tile.aka?, class_name: "w-[3.0cqw]" } %>
            <% end %>
          <% end %>
        <% end %>
      <% when :pon, :daiminkan %>
        <%= button_to game_play_command_path(@game),
                        params: {
                          event: "confirm_furo",
                          discarded_tile_id: @discarded_tile_id,
                          furo: true,
                          furo_type: furo_name,
                          furo_ids: furo_combinations.map(&:id)
                          },
                        form: {
                          id: "furo-#{furo_name}-#{furo_combinations.map(&:id).join('-')}",
                          data: {
                            testid: "furo_combinations",
                            furo_type: furo_name,
                            furo_ids: furo_combinations.map(&:id).join('-')
                          }
                        },
                      class: "inline-flex items-end gap-1 rounded border px-2 py-1 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cyan-300" do %>
          <% furo_combinations.each do |hand| %>
            <%= render partial: "games/mahjong_table/tile", locals: { tile: hand, red: hand.tile.aka?, class_name: "w-[3.0cqw]" } %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>

    <%= button_to "スルー",
                  game_play_command_path(@game),
                  params: {
                    event: "confirm_furo",
                    furo: false
                  },
                  form: { data: { testid: "through" } },
                  class: "rounded border px-2 py-1 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cyan-300" %>
  </div>
</div>
