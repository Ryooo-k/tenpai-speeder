<section class="rounded-3xl border border-slate-900 bg-slate-900/80 p-6 lg:p-7 shadow-xl shadow-emerald-500/10">
  <div class="flex flex-col gap-6">
    <div class="rounded-2xl border border-emerald-500/20 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-4">
      <div class="relative aspect-[4/3] w-full bg-emerald-900/30 overflow-hidden @container">
        <%= render partial: "games/mahjong_table/kyoku_status" %>
        <%= render partial: "games/mahjong_table/player", collection: @game.players %>
        <% if (event_partial = event_partial_path(@event)) %>
          <%= render partial: event_partial %>
        <% end %>
      </div>
    </div>

    <div class="flex justify-center gap-3">
      <% undo_button_classes = [
        "rounded-full border border-slate-700 bg-slate-800/60 px-4 py-2 text-sm font-semibold text-slate-100 shadow-sm shadow-emerald-500/20",
        ("transition hover:border-emerald-400 hover:text-emerald-200 hover:shadow-emerald-400/30" if @can_undo),
        ("opacity-50 cursor-not-allowed" unless @can_undo)
        ].compact.join(" ") %>

      <% redo_button_classes = [
        "rounded-full border border-slate-700 bg-slate-800/60 px-4 py-2 text-sm font-semibold text-slate-100 shadow-sm shadow-emerald-500/20",
        ("transition hover:border-emerald-400 hover:text-emerald-200 hover:shadow-emerald-400/30" if @can_redo),
        ("opacity-50 cursor-not-allowed" unless @can_redo)
        ].compact.join(" ") %>

      <%= form_with url: game_play_undo_path(@game),
                    class: "inline-block",
                    data: { testid: "undo" } do |form| %>
        <%= form.button "戻る",
                        class: undo_button_classes,
                        disabled: !@can_undo %>
      <% end %>

      <%= form_with url: game_play_redo_path(@game),
                    class: "inline-block",
                    data: { testid: "redo" } do |form| %>
        <%= form.button "進む",
                        class: redo_button_classes,
                        disabled: !@can_redo %>
      <% end %>
    </div>
  </div>
</section>
