<div class="absolute bottom-0 left-1/2 -translate-x-1/2">
  <% if @action == :choose && @game.current_player.user? %>
    <%= form_with url: game_action_discard_path(@game) do |form| %>
      <div class="flex">
        <%= render partial: "games/hands/hand_form", collection: user.hands, as: :hand, locals: { form: } %>
      </div>
    <% end %>

  <% elsif @action == :riichi_choose && @game.current_player.user? %>
    <%= form_with url: game_action_discard_path(@game) do |form| %>
      <div class="flex">
        <%= render partial: "games/hands/riichi_form", collection: user.hands, as: :hand, locals: { form: } %>
      </div>
    <% end %>

  <% else %>
    <div class="flex">
      <%= render partial: "games/hands/hand_plain", collection: user.hands, as: :hand %>
    </div>
  <% end %>
</div>

<div class="absolute top-2/3 left-1/2 -translate-x-1/2">
  <div class="grid grid-cols-6 grid-rows-4 place-items-center">
    <%= render partial: "games/rivers/river", collection: user.rivers %>
  </div>
</div>

<div class="absolute bottom-2 right-2 flex">
  <% user.melds.each do |meld| %>
      <%= image_tag(
            "tiles/#{meld.tile.suit}_#{meld.tile.number}.gif",
            class: "w-[3.8cqw] #{'-rotate-90 origin-bottom translate-x-1/2 -translate-y-1/3 ml-6' if meld.from?}"
          ) %>
  <% end %>
</div>
